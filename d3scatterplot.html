<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>d3 Scatterplot (Yankees Players Ages vs. Weight)</title>
    <style>


      text {
        font-family: sans-serif;
        fill: black;
      }
    </style>
  </head>
  <body>

<h1> 2018 League-Wide Standings in Major League Baseball </h1>

    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script>
    // a note that when trying d3.v3, the code did not work.

      // This is where you define the width, height and padding!

      var w = 800;
      var h = 600;
      var p = 50


      // Data Importation (not a word) goes here

      d3.csv("data/mlb-standings.csv", function(d) {
      	//refer to erin's note about converting string to number
        return {
          runs : +d.runs,
          w : +d.w,
          gb : +d.gb,
        };
        // these include the diffrent elements i'm focusing on: eg: runs, runs_diff and gb
      }).then(function(data) {





        var svg = d3.select("body").append("svg");


        // This is where you insert the width and height to the svg.

        svg.attr("width", w + p)
           .attr("height", h + p);


       //because this is a scatterplot, you need to create the circles that the data is bound to

        var circles = svg.selectAll("circle")
           .data(data)
           .enter()
           .append("circle")


           //mapping the max value
            var xScale = d3.scaleLinear()
                           .domain([0, d3.max(data, function(d) { return d.runs })])
                           .range([p, 500]);

            var yScale = d3.scaleLinear()
                           .domain([0, d3.max(data, function(d) { return d.w })])
                          .range([ h - p , p ]);

 					 //attributes of a circle include: cx, cy, and radius

           circles.attr("cx", function(d) {
             return xScale(d.runs);
           })
           .attr("cy", function(d) {
             return yScale(d.w);
           })
           .attr("r",function(d) {return d.gb});
           circles.attr("fill","pink")
                .style("opacity",.2)
                .style("stroke", "blue")

                var xAxis = d3.axisBottom()
              						    .scale(xScale);

              				   	svg.append("g") .attr("class", "x-axis")
              							 .attr("transform", "translate(0," + (h - p) + ")")
              						   .call(xAxis);


              	var yAxis = d3.axisLeft()
              								.scale(yScale);
              						 svg.append("g") .attr("class", "y-axis")
              							  .attr("transform", "translate(" + p + ",0)")
              						  	.call(yAxis);


         });
         // LABELS
      
         function parseName(team) {
 					var name = team.split(" ");
 					return name[0].charAt(0) + name[1].charAt(0)
 				}

         var labels = svg.selectAll("text")
           .data(data)
           .enter()
           .append("text")

           .text(function(d) {
             return parseName(d.team) + "-" + d.abbr;
           })
           .style("font-size", "15px");

         labels.attr("x", function(d) {
           return (d.team);
         })
         .attr("y", function(d) {
           return h - (d.abbr);
         });


       </script>
     </body>
   </html>
