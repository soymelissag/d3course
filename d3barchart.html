<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>d3 Bar Chart (NFL Players Touchdowns)</title>
		<style>
			rect {
				fill: pink;
				opacity: 0.2;
				stroke: blue;
			}

			text {
				font-family: sans-serif;
				fill: blue;
			}
		</style>
	</head>
	<body>
		<h1> 2018 National Football League Touchdown Statistics </h1>
		<t> The number of touchdowns are shown on the graph below. The first initials above each bar corresponds to the player name and the second initials correspond to the team names. </t>

		<script src="js/d3.min.js"></script>
		<script>
			// Width and height!
			var w = 1000;
			var h = 100;
			var p = 40


			// Importing the data! Here I am inserting the nfl rushing file. Buckle up, we in for a ride.

			d3.csv("data/nfl-rushing.csv").then(function(data) {


				//This is where I append the svg!

				var svg = d3.select("body")
				            .append("svg");



				// Applying the width and height so the SVG can live its best life.

				svg.attr("width", w + p)
           .attr("height", h );


					 var yScale = d3.scaleLinear()
													.domain([0, d3.max(data, function(d) { return d.TD })])
												 .range([ 0 ,100 ]);



				//selecting the shape (rectangle) that the data will be bound to

				svg.selectAll("rect")
				   .data(data)
					 .enter()
					 .append("rect")


				// for a rect you need: x, y, width and height. since i'm looking at
				//touchdowns (td) on the y axis, i apply it to the height and y scale

					 .attr("x", function(d, i) {
					   return (i * 32);
				   })
				   .attr("y", function(d) {
						 return h - d.TD;
					 })

					 .attr("width", 30)
					 .attr("height", function(d) {

				   return yScale(d.TD);



			});



				// Labels

				//An attempt to label with the players name

				function parseName(player) {
					var name = player.split(" ");
					return name[0].charAt(0) + name[1].charAt(0)
				}




				var labels = svg.selectAll("text")
					 .data(data)
					 .enter()
					 .append("text")


					 .text(function(d) {
						 return parseName(d.Player) + "-" + d.Pos;
					 })
					 .style("font-size", "8px");


				// Finally, position the labels using x, y coordinates.

				// For x, use the value previously used to position the bar itself.
				// In this case, our bar is 30 pixels, plus a 2-pixel margin. This
				// will put the text exactly at the left edge of the bar. We add 2
				// to indent the text two pixels from the left edge.

				// For y, use value previously used to position the bar itself. In
				// this case, the top of each bar is the player age subtracted
				// from the height of the svg. This will place the text's baseline
				// (the bottom of our text) above the bar. Add 8 to move the
				// text below the top edge of the bar. (This last value may change
			  // depending on your font size.)

				labels.attr("x", function(d, i) {
					  return (i * 32) + 2;
  				})
				  .attr("y", function(d) {
						return (h - d.TD) -2;
					});
			});
		</script>
	</body>
</html>
